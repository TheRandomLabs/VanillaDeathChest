buildscript {
	repositories {
		jcenter()

		gradlePluginPortal()

		maven {
			url "http://maven.fabricmc.net/"
		}
	}

	dependencies {
		classpath "net.fabricmc:fabric-loom:0.1.0-SNAPSHOT"
		classpath "com.github.jengelman.gradle.plugins:shadow:2.0.0"
	}
}

apply plugin: "fabric-loom"
apply plugin: "com.github.johnrengelman.shadow"

archivesBaseName = "vanilladeathchest"
version = "1.14-1.5.1.0-fabric"

sourceCompatibility = targetCompatibility = "1.8"

repositories {
	ivy {
		artifactPattern "https://endless.blue/files/ivy/[module]-[revision].[ext]"
	}
}

dependencies {
	minecraft "com.mojang:minecraft:18w50a"
	mappings "net.fabricmc:yarn:18w50a.2"
	modCompile "net.fabricmc:fabric-loader:0.2.0.64"
	modCompile "net.fabricmc:fabric:0.1.1.47"

	shadow "blue.endless:Jankson:0.0.4"
	compile "blue.endless:Jankson:0.0.4"
}

minecraft {}

processResources {
	//Ensure this task is redone when the version changes
	inputs.property "version", project.version

	//Replace version and mcversion in mcmod.info
	from(sourceSets.main.resources) {
		include "mcmod.info"
		expand "version": project.version
	}
}

shadowJar {
	classifier = ""
	relocate "blue.endless.jankson", "com.therandomlabs.vanilladeathchest.repackage.blue.endless.jankson"
	configurations = [project.configurations.shadow]
}

build.dependsOn shadowJar

artifacts {
	archives shadowJar
}
